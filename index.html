<!DOCTYPE html>
<html>
<head>
<title>MMWeather plots Dashboard</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<style>
body {font-family: Arial;}

/* Style the tab */
.tab {
  overflow: hidden;
  border: 1px solid #ccc;
  background-color: #f1f1f1;
}

/* Style the buttons inside the tab */
.tab button {
  background-color: inherit;
  float: left;
  border: none;
  outline: none;
  cursor: pointer;
  padding: 14px 16px;
  transition: 0.3s;
  font-size: 17px;
}

/* Change background color of buttons on hover */
.tab button:hover {
  background-color: #ddd;
}

/* Create an active/current tablink class */
.tab button.active {
  background-color: #ccc;
}

/* Style the tab content */
.tabcontent {
  display: none;
  padding: 6px 12px;
  border: 1px solid #ccc;
  border-top: none;
}
</style>
</head>
<body>
<script>  
  function tryAgain(e) 
  {
    setTimeout(reloadImg, 1000, e);
  }

  function reloadImg(e)
  {
    var source = e.src;
    e.src = source;
  }
</script>

<div style="font-size:16pt; float: left">MMWeather plots</div>
<div id="lastRefreshSeconds" style="font-size:10pt; float: right"> now</div>
<div id="lastRefresh" style="font-size:10pt; float: right">Last refresh: &nbsp; </div>
<div style="font-size:16pt; margin: 0 auto; width: 100px; shadow-text: 1px 1px #ee0000">Dashboard</div>

<div class="tab">
  <button class="tablinks" onclick="changeTab(event, 'Wind speed')" id="defaultOpen">Wind speed</button>
  <button class="tablinks" onclick="changeTab(event, 'Wind dir')">Wind dir</button>
  <button class="tablinks" onclick="changeTab(event, 'Waves')">Waves</button>
  <button class="tablinks" onclick="changeTab(event, 'Temperature')">Temperature</button>
</div>

<div id="Wind speed" class="tabcontent">
  <h3>Wind speed / wind gust</h3>
 <table style="width:100%">
  <tr>
    <th>AP1, past 24 hrs</th>
    <th>DPPA, past 24 hrs</th>
  </tr>
  <tr>
    <th><img class="NO-CACHE" src="http://www.mmweather.net/data/archive-plot?siteids=1047&paramids=14,15&period=86400&linestyle=3&time=0" alt="NMWeather AP1 24-hour plot" width="768" height="576" onerror="reloadImg(this)"></th>
    <th><img class="NO-CACHE" src="http://www.mmweather.net/data/archive-plot?siteids=1048&paramids=14,15&period=86400&linestyle=3&time=0" alt="NMWeather DPPA 24-hour plot" width="768" height="576" onerror="reloadImg(this)"></th>
  </tr>
  <tr>
    <th>-</th>
    <th>-</th>
  </tr>
  <tr>
    <th>AP1, past 12 hrs</th>
    <th>DPPA, past 12 hrs</th>
  </tr>
  <tr>
    <th><img class="NO-CACHE" src="http://www.mmweather.net/data/archive-plot?siteids=1047&paramids=14,15&period=43200&linestyle=3&time=0" alt="NMWeather AP1 12-hour plot" width="768" height="576" onerror="reloadImg(this)"></th>
    <th><img class="NO-CACHE" src="http://www.mmweather.net/data/archive-plot?siteids=1048&paramids=14,15&period=43200&linestyle=3&time=0" alt="NMWeather DPPA 12-hour plot" width="768" height="576" onerror="reloadImg(this)"></th>
  </tr>
  <tr>
    <th>-</th>
    <th>-</th>
  </tr>
  <tr>
    <th>AP1, past 6 hrs</th>
    <th>DPPA, past 6 hrs</th>
  </tr>
  <tr>
    <th><img class="NO-CACHE" src="http://www.mmweather.net/data/archive-plot?siteids=1047&paramids=14,15&period=21600&linestyle=3&time=0" alt="NMWeather AP1 6-hour plot" width="768" height="576" onerror="reloadImg(this)"></th>
    <th><img class="NO-CACHE" src="http://www.mmweather.net/data/archive-plot?siteids=1048&paramids=14,15&period=21600&linestyle=3&time=0" alt="NMWeather DPPA 6-hour plot" width="768" height="576" onerror="reloadImg(this)"></th>
  </tr>
  <tr>
    <th>-</th>
    <th>-</th>
  </tr>
  <tr>
    <th>AP1, past 3 hrs</th>
    <th>DPPA, past 3 hrs</th>
  </tr>
  <tr>
    <th><img class="NO-CACHE" src="http://www.mmweather.net/data/archive-plot?siteids=1047&paramids=14,15&period=10800&linestyle=3&time=0" alt="NMWeather AP1 3-hour plot" width="768" height="576" onerror="reloadImg(this)"></th>
    <th><img class="NO-CACHE" src="http://www.mmweather.net/data/archive-plot?siteids=1048&paramids=14,15&period=10800&linestyle=3&time=0" alt="NMWeather DPPA 3-hour plot" width="768" height="576" onerror="reloadImg(this)"></th>
  </tr>
</table>
</div>

<div id="Wind dir" class="tabcontent">
  <h3>Wind dir</h3>
 <table style="width:100%">
  <tr>
    <th>AP1, past 24 hrs</th>
    <th>DPPA, past 24 hrs</th>
  </tr>
  <tr>
    <th><img class="NO-CACHE" src="http://www.mmweather.net/data/archive-plot?siteids=1047&paramids=13&period=86400&linestyle=3&time=0" alt="NMWeather AP1 24-hour plot" width="768" height="576" onerror="reloadImg(this)"></th>
    <th><img class="NO-CACHE" src="http://www.mmweather.net/data/archive-plot?siteids=1048&paramids=13&period=86400&linestyle=3&time=0" alt="NMWeather DPPA 24-hour plot" width="768" height="576" onerror="reloadImg(this)"></th>
  </tr>
  <tr>
    <th>-</th>
    <th>-</th>
  </tr>
  <tr>
    <th>AP1, past 12 hrs</th>
    <th>DPPA, past 12 hrs</th>
  </tr>
  <tr>
    <th><img class="NO-CACHE" src="http://www.mmweather.net/data/archive-plot?siteids=1047&paramids=13&period=43200&linestyle=3&time=0" alt="NMWeather AP1 12-hour plot" width="768" height="576" onerror="reloadImg(this)"></th>
    <th><img class="NO-CACHE" src="http://www.mmweather.net/data/archive-plot?siteids=1048&paramids=13&period=43200&linestyle=3&time=0" alt="NMWeather DPPA 12-hour plot" width="768" height="576" onerror="reloadImg(this)"></th>
  </tr>
  <tr>
    <th>-</th>
    <th>-</th>
  </tr>
  <tr>
    <th>AP1, past 6 hrs</th>
    <th>DPPA, past 6 hrs</th>
  </tr>
  <tr>
    <th><img class="NO-CACHE" src="http://www.mmweather.net/data/archive-plot?siteids=1047&paramids=13&period=21600&linestyle=3&time=0" alt="NMWeather AP1 6-hour plot" width="768" height="576" onerror="reloadImg(this)"></th>
    <th><img class="NO-CACHE" src="http://www.mmweather.net/data/archive-plot?siteids=1048&paramids=13&period=21600&linestyle=3&time=0" alt="NMWeather DPPA 6-hour plot" width="768" height="576" onerror="reloadImg(this)"></th>
  </tr>
  <tr>
    <th>-</th>
    <th>-</th>
  </tr>
  <tr>
    <th>AP1, past 3 hrs</th>
    <th>DPPA, past 3 hrs</th>
  </tr>
  <tr>
    <th><img class="NO-CACHE" src="http://www.mmweather.net/data/archive-plot?siteids=1047&paramids=13&period=10800&linestyle=3&time=0" alt="NMWeather AP1 3-hour plot" width="768" height="576" onerror="reloadImg(this)"></th>
    <th><img class="NO-CACHE" src="http://www.mmweather.net/data/archive-plot?siteids=1048&paramids=13&period=10800&linestyle=3&time=0" alt="NMWeather DPPA 3-hour plot" width="768" height="576" onerror="reloadImg(this)"></th>
  </tr>
</table>
</div>

<div id="Waves" class="tabcontent">
  <h3>Waves</h3>
 <table style="width:100%">
  <tr>
    <th>AP1, past 24 hrs</th>
    <th>DPPA, past 24 hrs</th>
  </tr>
  <tr>
    <th><img class="NO-CACHE" src="http://www.mmweather.net/data/archive-plot?siteids=1047&paramids=135&period=86400&linestyle=3&time=0" alt="NMWeather AP1 24-hour plot" width="768" height="576" onerror="reloadImg(this)"></th>
    <th><img class="NO-CACHE" src="http://www.mmweather.net/data/archive-plot?siteids=1048&paramids=135&period=86400&linestyle=3&time=0" alt="NMWeather DPPA 24-hour plot" width="768" height="576" onerror="reloadImg(this)"></th>
  </tr>
  <tr>
    <th>-</th>
    <th>-</th>
  </tr>
  <tr>
    <th>AP1, past 12 hrs</th>
    <th>DPPA, past 12 hrs</th>
  </tr>
  <tr>
    <th><img class="NO-CACHE" src="http://www.mmweather.net/data/archive-plot?siteids=1047&paramids=135&period=43200&linestyle=3&time=0" alt="NMWeather AP1 12-hour plot" width="768" height="576" onerror="reloadImg(this)"></th>
    <th><img class="NO-CACHE" src="http://www.mmweather.net/data/archive-plot?siteids=1048&paramids=135&period=43200&linestyle=3&time=0" alt="NMWeather DPPA 12-hour plot" width="768" height="576" onerror="reloadImg(this)"></th>
  </tr>
  <tr>
    <th>-</th>
    <th>-</th>
  </tr>
  <tr>
    <th>AP1, past 6 hrs</th>
    <th>DPPA, past 6 hrs</th>
  </tr>
  <tr>
    <th><img class="NO-CACHE" src="http://www.mmweather.net/data/archive-plot?siteids=1047&paramids=135&period=21600&linestyle=3&time=0" alt="NMWeather AP1 6-hour plot" width="768" height="576" onerror="reloadImg(this)"></th>
    <th><img class="NO-CACHE" src="http://www.mmweather.net/data/archive-plot?siteids=1048&paramids=135&period=21600&linestyle=3&time=0" alt="NMWeather DPPA 6-hour plot" width="768" height="576" onerror="reloadImg(this)"></th>
  </tr>
  <tr>
    <th>-</th>
    <th>-</th>
  </tr>
  <tr>
    <th>AP1, past 3 hrs</th>
    <th>DPPA, past 3 hrs</th>
  </tr>
  <tr>
    <th><img class="NO-CACHE" src="http://www.mmweather.net/data/archive-plot?siteids=1047&paramids=135&period=10800&linestyle=3&time=0" alt="NMWeather AP1 3-hour plot" width="768" height="576" onerror="reloadImg(this)"></th>
    <th><img class="NO-CACHE" src="http://www.mmweather.net/data/archive-plot?siteids=1048&paramids=135&period=10800&linestyle=3&time=0" alt="NMWeather DPPA 3-hour plot" width="768" height="576" onerror="reloadImg(this)"></th>
  </tr>
</table>
</div>

<div id="Temperature" class="tabcontent">
  <h3>Temperature</h3>
 <table style="width:100%">
  <tr>
    <th>AP1, past 24 hrs</th>
    <th>DPPA, past 24 hrs</th>
  </tr>
  <tr>
    <th><img class="NO-CACHE" src="http://www.mmweather.net/data/archive-plot?siteids=1047&paramids=61&period=86400&linestyle=3&time=0" alt="NMWeather AP1 24-hour plot" width="768" height="576" onerror="reloadImg(this)"></th>
    <th><img class="NO-CACHE" src="http://www.mmweather.net/data/archive-plot?siteids=1048&paramids=61&period=86400&linestyle=3&time=0" alt="NMWeather DPPA 24-hour plot" width="768" height="576" onerror="reloadImg(this)"></th>
  </tr>
  <tr>
    <th>-</th>
    <th>-</th>
  </tr>
  <tr>
    <th>AP1, past 12 hrs</th>
    <th>DPPA, past 12 hrs</th>
  </tr>
  <tr>
    <th><img class="NO-CACHE" src="http://www.mmweather.net/data/archive-plot?siteids=1047&paramids=61&period=43200&linestyle=3&time=0" alt="NMWeather AP1 12-hour plot" width="768" height="576" onerror="reloadImg(this)"></th>
    <th><img class="NO-CACHE" src="http://www.mmweather.net/data/archive-plot?siteids=1048&paramids=61&period=43200&linestyle=3&time=0" alt="NMWeather DPPA 12-hour plot" width="768" height="576" onerror="reloadImg(this)"></th>
  </tr>
  <tr>
    <th>-</th>
    <th>-</th>
  </tr>
  <tr>
    <th>AP1, past 6 hrs</th>
    <th>DPPA, past 6 hrs</th>
  </tr>
  <tr>
    <th><img class="NO-CACHE" src="http://www.mmweather.net/data/archive-plot?siteids=1047&paramids=61&period=21600&linestyle=3&time=0" alt="NMWeather AP1 6-hour plot" width="768" height="576" onerror="reloadImg(this)"></th>
    <th><img class="NO-CACHE" src="http://www.mmweather.net/data/archive-plot?siteids=1048&paramids=61&period=21600&linestyle=3&time=0" alt="NMWeather DPPA 6-hour plot" width="768" height="576" onerror="reloadImg(this)"></th>
  </tr>
  <tr>
    <th>-</th>
    <th>-</th>
  </tr>
  <tr>
    <th>AP1, past 3 hrs</th>
    <th>DPPA, past 3 hrs</th>
  </tr>
  <tr>
    <th><img class="NO-CACHE" src="http://www.mmweather.net/data/archive-plot?siteids=1047&paramids=61&period=10800&linestyle=3&time=0" alt="NMWeather AP1 3-hour plot" width="768" height="576" onerror="reloadImg(this)"></th>
    <th><img class="NO-CACHE" src="http://www.mmweather.net/data/archive-plot?siteids=1048&paramids=61&period=10800&linestyle=3&time=0" alt="NMWeather DPPA 3-hour plot" width="768" height="576" onerror="reloadImg(this)"></th>
  </tr>
</table>
</div>

<script>
function changeTab(evt, tabName) {
  var i, tabcontent, tablinks;
  tabcontent = document.getElementsByClassName("tabcontent");
  for (i = 0; i < tabcontent.length; i++) {
    tabcontent[i].style.display = "none";
  }
  tablinks = document.getElementsByClassName("tablinks");
  for (i = 0; i < tablinks.length; i++) {
    tablinks[i].className = tablinks[i].className.replace(" active", "");
  }
  document.getElementById(tabName).style.display = "block";
  evt.currentTarget.className += " active";
}

// Get the element with id="defaultOpen" and click on it
document.getElementById("defaultOpen").click();

var refreshDate = new Date().getTime();

setInterval(function() {
      var images = document.images;
      var now = new Date().getTime();
      for (var i=0; i<images.length; i++) {
          images[i].src = images[i].src.replace(/\btime=[^&]*/, 'time=' + now);
      }
      refreshDate = now
      document.getElementById("lastRefresh").innerHTML = "Last refresh:" + refreshDate.toLocaleTimeString();
  }, 60000); // 10000 milliseconds = 10 seconds

setInterval(function() {
      var now = new Date().getTime();
      
      // Find the distance between now and the count down date
      var distance = now - refreshDate;

      // Time calculations for days, hours, minutes and seconds
      var days = Math.floor(distance / (1000 * 60 * 60 * 24));
      var hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
      var minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
      var seconds = Math.floor((distance % (1000 * 60)) / 1000);

      // Display the result in the element with id="demo"
      if (days > 0) {
          var timestr = days + "d " + hours + "h " + minutes + "m " + seconds + "s ago";
      } else {
          if (hours > 0) {
              var timestr = hours + "h " + minutes + "m " + seconds + "s ago";
          } else {
              if (minutes > 0) {
                  var timestr = minutes + "m " + seconds + "s ago";
              } else {
                  if (seconds > 0) {
                      var timestr = seconds + "s ago";
                  } else {
                      var timestr = "now";
                  };
              };
          };
      };
      document.getElementById("lastRefreshSeconds").innerHTML = timestr;
  }, 1000); // 1000 milliseconds = 1 second

function reloadImg(e) 
  {
    setTimeout(reloadImgSrc, 200, e);
  }

function reloadImgSrc(e)
  {
    var source = e.src;
    e.src = source;
  }
</script>
   
</body>
</html> 
